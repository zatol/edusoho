(window.webpackJsonp=window.webpackJsonp||[]).push([["my"],{"5ede":function(t,e,s){"use strict";var i=s("240b");e.a={beforeRouteEnter:function(t,e,s){i.a.state.token?s():s({name:"prelogin",query:{redirect:t.fullPath}})}}},7067:function(t,e,s){"use strict";s("e17f");var i=s("2241"),a=(s("e7e5"),s("d399")),r=s("a026"),n=s("3ce7"),c=/micromessenger/.test(navigator.userAgent.toLowerCase());e.a=function(t,e){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t||s&&!e)a.a.fail("缺少分享参数");else{var o={domainUri:location.origin,itemUri:"",source:"h5"};n.a.marketingActivities({query:{activityId:t},data:o}).then((function(t){var n=-1!==t.url.indexOf("?")?"&":"?",o=s?"".concat(e).concat(n,"ticket=").concat(t.ticket):t.url;c?window.location.href=o:i.a.confirm({message:"去微信完成活动",confirmButtonText:"复制链接",title:""}).then((function(){try{r.a.prototype.$copyText(o).then((function(){a.a.success("复制成功")}),(function(){a.a.fail("请更换浏览器复制")}))}catch(t){a.a.fail("请更换浏览器复制")}})).catch((function(){}))})).catch((function(t){a.a.fail(t.message)}))}}},8807:function(t,e,s){"use strict";s("a481"),s("ac6a"),s("456d"),s("7f7f"),s("c5f6");var i=s("db72"),a=s("2f62"),r={props:{type:{type:String,default:"price"},course:{type:Object,default:{}},order:{type:Object,default:{}}},data:function(){return{isFree:0==this.course.price}},computed:Object(i.a)({},Object(a.d)(["courseSettings"]),{rate:function(){return parseInt(this.course.publishedTaskNum)?parseInt(this.course.progress.percent):0},showStudent:function(){return!this.courseSettings||Number(this.courseSettings.show_student_num_enabled)}}),filters:{numFilter:function(t){return t?parseFloat(t).toFixed(2):""}},methods:{goToPay:function(){this.$router.push({path:"/pay",query:{id:this.order.id,source:"order",sn:this.order.sn,targetId:this.order.targetId,targetType:this.order.targetType}})}}},n=s("a6c2"),c={components:{switchBox:Object(n.a)(r,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"e-course-switch-box"},["price"===t.type?s("div",{staticClass:"switch-box"},[s("span",{staticClass:"switch-box__price"},[t.isFree?s("p",{staticClass:"free"},[t._v("免费")]):t._e(),t.isFree?t._e():s("p",{staticClass:"price"},[t._v("¥ "+t._s(t.course.price))])]),s("span",{staticClass:"switch-box__state"},[t.showStudent?s("p",[t._v(t._s(t.course.studentNum)+"人在学")]):t._e()])]):t._e(),"order"===t.type?s("div",{staticClass:"switch-box"},[s("span",{staticClass:"switch-box__price"},[t.isFree?s("p",{staticClass:"free"},[t._v("免费")]):t._e(),t.isFree?t._e():s("p",{staticClass:"price"},[t._v("¥ "+t._s(t.order.pay_amount/100))])]),s("span",{staticClass:"switch-box__state"},["created"!==t.order.status&&"paying"!==t.order.status?s("p",{class:t.order.status},[t._v("\n        "+t._s(t._f("filterOrderStatus")(t.order.status))+"\n      ")]):t._e(),"created"===t.order.status||"paying"===t.order.status?s("span",{staticClass:"order-pay",on:{click:t.goToPay}},[t._v(t._s(t._f("filterOrderStatus")(t.order.status)))]):t._e()])]):t._e(),"confirmOrder"===t.type?s("div",{staticClass:"switch-box"},[s("span",{staticClass:"switch-box__price"},[s("p",{staticClass:"price"},[t._v("¥ "+t._s(t._f("numFilter")(t.order.totalPrice)))])])]):t._e(),"rank"===t.type?s("div",{staticClass:"rank-box"},[s("div",{staticClass:"progress round-conner"},[s("div",{staticClass:"curRate round-conner",style:{width:t.rate+"%"}})]),s("span",[t._v(t._s(this.rate)+"%")])]):t._e()])}),[],!1,null,null,null).exports},props:{course:{type:Object,default:function(){return{}}},order:{type:Object,default:function(){return{}}},type:{type:String,default:"price"},feedback:{type:Boolean,default:!0},typeList:{type:String,default:"course_list"},duration:{type:Number,default:0}},data:function(){return{pathName:this.$route.name}},computed:{imgSrc:function(){if("classroom_list"===this.typeList)return this.course.cover.middle;var t=this.course.courseSet,e=t?t.cover.middle:this.order.cover.middle;return e||""},title:function(){return"classroom_list"===this.typeList?this.course.title:this.course.courseSetTitle||(this.course.courseSet?this.course.courseSet.title:"")||this.order.title},teachPlan:function(){return!!this.course.title&&this.course.title},imgClass:function(){return"vip"===this.typeList?"e-vip__img":"e-course__img"},vipDuration:function(){return"month"===this.order.unitType?"".concat(this.duration,"个月"):"year"===this.order.unitType?"".concat(this.duration,"年"):"".concat(this.duration,"天")}},watch:{course:{handler:function(t){var e=t.courseSet;if("miniprogramSetting"===this.pathName&&e)for(var s=Object.keys(e.cover),i=0;i<s.length;i++)e.cover[s[i]]=e.cover[s[i]].replace(/^(\/\/)|(http:\/\/)/,"https://")},immediate:!0}},methods:{onClick:function(t){if(this.feedback&&"vip"!==this.typeList){var e="order"===this.type,s=this.course.id||this.order.targetId;"SPAN"!==t.target.tagName&&(e?location.href=this.order.targetUrl:"course"!==this.typeList&&("classroom_list"===this.typeList&&this.$router.push({path:"/classroom/".concat(s)}),"course_list"===this.typeList&&this.$router.push({path:"/course/".concat(s)})))}}}},o=Object(n.a)(c,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"e-course"},[s("div",{staticClass:"clearfix",on:{click:t.onClick}},[s("div",{staticClass:"e-course__left pull-left"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imgSrc,expression:"imgSrc"}],class:t.imgClass})]),s("div",{staticClass:"e-course__right pull-left"},["confirmOrder"===t.type?s("div",{staticClass:"e-course__title course-confirm-title"},[t._v("\n        "+t._s(t.title)),"vip"===t.typeList?s("span",{staticClass:"grey-medium"},[t._v(" x "+t._s(t.vipDuration))]):t._e()]):s("div",[s("div",{staticClass:"e-course__title text-overflow"},[t._v(t._s(t.title))]),"classroom_list"===t.typeList?s("div",{staticClass:"e-course__count"},[t._v("\n          共 "+t._s(t.course.courseNum)+" 门课程\n        ")]):t._e(),"course_list"===t.typeList?s("div",{staticClass:"e-course__project text-overflow"},[t.teachPlan?s("span",[t._v(t._s(t.teachPlan))]):t._e()]):t._e()]),s("switchBox",{attrs:{type:t.type,course:t.course,order:t.order,"student-num":t.course.studentNum,"published-task-num":t.course.publishedTaskNum}})],1)])])}),[],!1,null,null,null);e.a=o.exports},a262:function(t,e,s){"use strict";var i=s("7067");e.a={methods:{activityHandle:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(i.a)(t,e,s)}}}},b864:function(t,e,s){"use strict";s.r(e);var i=s("db72"),a=(s("e7e5"),s("d399")),r=s("75fc"),n=s("8807"),c=s("3ce7"),o={components:{eCourse:n.a},data:function(){return{list:[],isFirstRequestCompile:!1,loading:!1,finished:!1,offset:0}},created:function(){},methods:{onLoad:function(){var t=this,e={offset:this.offset};c.a.getMyOrder({params:e}).then((function(e){var s=e.data,i=e.paging;t.isFirstRequestCompile=!0,t.list=[].concat(Object(r.a)(t.list),Object(r.a)(s)),t.offset=t.list.length,t.list.length==i.total&&(t.finished=!0),t.loading=!1})).catch((function(e){a.a.fail(e.message),t.isFirstRequestCompile=!0,t.loading=!1}))}}},l=s("a6c2"),u=Object(l.a)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"orders"},[0===t.list.length&&t.isFirstRequestCompile?s("div",{staticClass:"orders-container__empty"},[s("img",{attrs:{src:"static/images/orderEmpty.png"}}),s("span",[t._v("暂无订单记录")])]):s("div",{staticClass:"order"},[s("van-list",{staticClass:"tab-list",attrs:{finished:t.finished},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(t){return s("e-course",{key:t.id,attrs:{order:t,"type-list":t.targetType,type:"order"}})})),1)],1)])}),[],!1,null,null,null).exports,d=(s("c5f6"),s("a262")),p={cut:"砍价",groupon:"拼团",seckill:"秒杀"},v={cut:"砍",groupon:"团",seckill:"秒"},h={successed:"成功",ongoing:"中",failed:"失败"},f={name:"ActivityItem",mixins:[d.a],props:{activity:{type:Object,default:function(){return{}}}},data:function(){return{type2symbol:v,type2label:p,status2label:h,activityId:Number(this.activity.activityId)}},methods:{viewDetail:function(t){}}},_={components:{activityItem:Object(l.a)(f,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"marketing-groupon activity-cell",on:{click:t.viewDetail}},[s("div",{staticClass:"activity-cell__head"},[s("span",{staticClass:"head-left",class:t.activity.type},[t._v(t._s(t.type2symbol[t.activity.type]))]),s("span",{staticClass:"head-right",class:t.activity.status},[t._v(t._s(t.type2label[t.activity.type]+t.status2label[t.activity.status]))])]),s("div",{staticClass:"activity-cell__body",on:{click:function(e){return t.activityHandle(t.activityId)}}},[s("div",{staticClass:"marketing-groupon__image-container",class:{"marketing-groupon__image-empty":!t.activity.cover}},[t.activity.cover?s("img",{staticClass:"marketing-groupon__image",attrs:{src:t.activity.cover}}):t._e()]),s("div",{staticClass:"marketing-groupon__context e-groupon__context"},[s("div",{staticClass:"context-title text-overflow"},[t._v(t._s(t.activity.name))]),s("div",{staticClass:"context-sale"},[t.activity.price?s("span",{staticClass:"context-sale__sale-price"},[t._v(t._s(t.activity.price)+"元")]):t._e(),t.activity.originPrice?s("span",{staticClass:"context-sale__origin-price"},[t._v(t._s(t.activity.originPrice)+"元")]):t._e(),s("span",{staticClass:"context-sale__shopping"},[t._v(t._s(t.type2label[t.activity.type])+"详情")])])])])])}),[],!1,null,"3fa10c57",null).exports},data:function(){return{list:[],isFirstRequestCompile:!1,loading:!1,finished:!1,offset:0}},mounted:function(){this.onLoad()},methods:{onLoad:function(){var t=this,e={offset:this.offset};c.a.myActivities({params:e}).then((function(e){var s=e.data,i=e.paging;t.isFirstRequestCompile=!0,t.list=[].concat(Object(r.a)(t.list),Object(r.a)(s)),t.offset=t.list.length,t.list.length==i.total&&(t.finished=!0),t.loading=!1})).catch((function(e){a.a.fail(e.message),t.isFirstRequestCompile=!0,t.loading=!1}))}}},m=Object(l.a)(_,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"orders"},[0===t.list.length&&t.isFirstRequestCompile?s("div",{staticClass:"orders-container__empty"},[s("img",{attrs:{src:"static/images/orderEmpty.png"}}),s("span",[t._v("暂无活动记录")])]):s("div",{staticClass:"activity"},[s("van-list",{staticClass:"tab-list",attrs:{finished:t.finished},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(t,e){return s("activity-item",{key:e,attrs:{activity:t}})})),1)],1)])}),[],!1,null,null,null).exports,g=s("2f62"),y={computed:Object(i.a)({},Object(g.d)(["user","vipSwitch"]),{vipDated:function(){if(!this.user.vip)return!1;var t=new Date(this.user.vip.deadline).getTime();return(new Date).getTime()>t}}),created:function(){this.getUserInfo()},methods:Object(i.a)({},Object(g.b)(["getUserInfo"]))},b={components:{Orders:u,activity:m,User:Object(l.a)(y,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user"},[s("div",{staticClass:"user-section clearfix"},[s("router-link",{attrs:{to:"/settings"}},[t.user.avatar?s("img",{staticClass:"user-img",attrs:{src:t.user.avatar.large}}):t._e()]),s("div",{class:["user-middle",t.vipSwitch?"":"single-middle"]},[s("div",{staticClass:"user-name"},[t._v(t._s(t.user.nickname))]),t.vipSwitch?s("div",[t.user.vip?s("span",{staticClass:"user-vip"},[s("router-link",{attrs:{to:{path:"/vip",query:{id:t.user.vip.levelId}}}},[s("img",{class:["vip-img",t.vipDated?"vip-expired":""],attrs:{src:t.user.vip.icon}}),t.vipDated?s("span",{staticClass:"grey text-overflow vip-name"},[t._v(t._s(t.user.vip.vipName)+"已过期，"),s("span",{staticClass:"color-primary"},[t._v("重新开通")])]):s("span",{staticClass:"color-primary"},[t._v(t._s(t.user.vip.vipName))])])],1):s("div",[s("router-link",{staticClass:"user-vip",attrs:{to:"/vip"}},[t._v("\n            您还不是会员，"),s("span",{staticClass:"color-primary"},[t._v("去开通")])])],1)]):t._e()]),s("router-link",{staticClass:"user-setting",attrs:{to:"/settings"}},[s("img",{attrs:{src:"static/images/setting.png"}})])],1)])}),[],!1,null,null,null).exports},mixins:[s("5ede").a],data:function(){return{activeIndex:0,tabs:["我的订单","我的活动"],hasBusinessDrainage:!1,isShowDistributorEntrance:!1,drpSetting:{}}},computed:Object(i.a)({},Object(g.d)(["DrpSwitch"]),{},Object(g.d)({isLoading:function(t){return t.isLoading}})),created:function(){var t=this;setTimeout((function(){window.scrollTo(0,0)}),100),c.a.hasPluginInstalled().then((function(e){t.hasBusinessDrainage=e.BusinessDrainage})),this.showDistributorEntrance()},methods:{showDistributorEntrance:function(){this.DrpSwitch?(this.getDrpSetting(),this.getAgencyBindRelation()):this.isShowDistributorEntrance=!1},getAgencyBindRelation:function(){var t=this;c.a.getAgencyBindRelation().then((function(e){e.agencyId?t.isShowDistributorEntrance=!0:t.isShowDistributorEntrance=!1}))},getDrpSetting:function(){var t=this;c.a.getDrpSetting().then((function(e){t.drpSetting=e}))}}},C=Object(l.a)(b,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.isLoading?s("e-loading"):t._e(),s("user"),s("router-link",{attrs:{to:{name:"couponCovert"}}},[t.hasBusinessDrainage?s("div",{staticClass:"coupon-code-entrance"},[t._v("\n      兑换卡券\n      "),s("i",{staticClass:"van-icon van-icon-arrow pull-right"})]):t._e()]),t.isShowDistributorEntrance?s("a",{attrs:{href:t.drpSetting.distributor_login_url}},[t._m(0)]):t._e(),s("van-tabs",{staticClass:"after-tabs e-learn",model:{value:t.activeIndex,callback:function(e){t.activeIndex=e},expression:"activeIndex"}},t._l(t.tabs,(function(t,e){return s("van-tab",{key:e,attrs:{title:t}})})),1),s("orders",{directives:[{name:"show",rawName:"v-show",value:0===t.activeIndex,expression:"activeIndex === 0"}]}),s("activity",{directives:[{name:"show",rawName:"v-show",value:1===t.activeIndex,expression:"activeIndex === 1"}]})],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"coupon-code-entrance"},[this._v("\n      分销中心\n      "),e("i",{staticClass:"van-icon van-icon-arrow pull-right"})])}],!1,null,null,null);e.default=C.exports}}]);